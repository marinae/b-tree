# Структура репозитория:
```
├── classes.h     // Описание используемых структур
│
├── blocks.h      // Работа с блоками (страницами файла)
│   blocks.c
│
├── helpful.h     // Разные полезные функции
│   helpful.c
│
├── insert.h      // Вставка ключа
│   insert.c
│
├── logger.h      // Запись в WAL (Write Ahead Log)
│   logger.c
│
├── select.h      // Поиск ключа
│   select.c
│
├── delete.h      // Удаление ключа
│   delete.c
│
├── database.h    // Остальные функции
│   database.c       для работы с базой
│
├── cache.h       // Кэширование
│   cache.c 
│
├── mydb.h        // Инициализация базы данных и
│   mydb.c           заполнение API
```

Для тестирования восстановления по журналу можно раскомментировать макрос

```
#define _BAD_TEST_
```

в файле `mydb.h`. Макрос запрещает базе использовать журнал при открытии существующей базы, поэтому страницы, не сброшенные на диск перед закрытием, будут утеряны. Затем выполняем

```
make
make wal_test
```

Сначала выполняется `insert_workload.in` -- вставка ключей, но при закрытии кэш не сбрасывается на диск. После этого выполняется `select_workload.in` -- извлечение ключей. Если `_BAD_TEST_` не объявлен, то все утерянные страницы будут корректно восстановлены.

Частота чекпойнтов определена в файле `logger.h`:

```
static const int  CP_FREQUENCY  = 500;
```
